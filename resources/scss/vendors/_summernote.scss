// SPDX-License-Identifier: CC BY-NC-SA 4.0

///
/// Summernote Editor Overrides
///
/// Passt das Design des WYSIWYG-Editors an das Theme an (Light/Dark).
///

/*!
 * @file      resources/scss/vendors/_summernote.scss
 * @link      twokinds.4lima.de
 *
 * @copyright (c) 2025 Felix Maywald. CC BY-NC-SA 4.0
 * @license   https://github.com/RaptorXilef/twokinds.4lima.de/blob/main/LICENSE
 *
 * @author    Felix Maywald (@RaptorXilef)
 * @link      https://github.com/RaptorXilef/twokinds.4lima.de
 */

///
/// @since    5.0.0
/// - Extrahiert aus main_dark.scss für bessere Kapselung.
/// - style(Linter): Button-Status Selektoren priorisiert.
/// - style(Linter): Button-Status Spezifität korrigiert.
/// - feat(CSS): Fehlende Styles für Popovers aus main_dark.scss integriert.
/// - style(Linter): Reihenfolge von Hover und Theme-Override in .note-btn getauscht (Fix no-descending-specificity).
///

@use '../abstracts/variables' as *;

.note-editor.note-frame {
    border-color: var(--border-medium);

    body.theme-night & {
        border-color: var(--button-bg);
    }

    // Toolbar
    .note-toolbar {
        color: var(--text-color);
        background-color: var(--table-header-bg) !important;
        border-bottom: 1px solid var(--border-medium);

        body.theme-night & {
            background-color: var(--sidebar-bg) !important; // Accent Dark
            border-bottom-color: var(--button-bg);
        }
    }

    // Buttons
    .note-btn {
        color: var(--text-on-medium);
        background-color: var(--button-bg);
        border: 1px solid transparent;

        // Hover ZUERST (Niedrigere Spezifität)
        &:hover,
        &:focus,
        &:active {
            background-color: var(--button-hover-bg);
        }

        // Theme Override DANACH (Höhere Spezifität)
        body.theme-night & {
            color: var(--text-color);
        }
    }

    .note-btn.disabled {
        cursor: not-allowed;
        opacity: 0.6;
    }

    // Dropdowns
    .dropdown-menu {
        color: var(--text-color);
        background-color: var(--content-bg);
        border-color: var(--border-medium);

        body.theme-night & {
            background-color: var(--page-bg);
            border-color: var(--button-bg);
        }

        .dropdown-item {
            color: var(--text-color);

            &:hover {
                background-color: var(--menu-bg);

                body.theme-night & {
                    background-color: var(--button-bg);
                }
            }
        }
    }

    // Popovers (z.B. Link-Editor)
    .note-popover .popover-content,
    .note-modal-content {
        color: var(--text-color);
        background-color: var(--content-bg);
        border: 1px solid var(--border-medium);

        body.theme-night & {
            background-color: var(--content-bg);
            border-color: var(--button-hover-bg);
        }
    }

    .note-popover .popover-header,
    .note-modal-header {
        background-color: var(--header-bg);
        border-bottom: 1px solid var(--border-medium);

        body.theme-night & {
            background-color: var(--sidebar-bg);
            border-bottom-color: var(--button-hover-bg);
        }
    }

    .note-modal-footer {
        border-top: 1px solid var(--border-light);

        body.theme-night & {
            border-top-color: var(--button-hover-bg);
        }
    }

    .note-form-label {
        color: var(--text-color);
    }

    // Editor Area (Editable)
    .note-editable {
        color: var(--text-color) !important;
        background-color: var(--content-bg) !important;

        body.theme-night & {
            background-color: var(--page-bg) !important;
        }

        p {
            color: var(--text-color) !important;
        }
    }

    // Code View
    .note-codable {
        font-family: $font-mono !important;
        font-size: 14px; // Optional: Code ist oft besser lesbar, wenn er etwas kleiner ist
        line-height: 1.4; // Optional: Mehr Zeilenabstand für bessere Lesbarkeit
        color: #ccc;
        background-color: #222;

        body.theme-night & {
            color: var(--link-color);
            background-color: var(--page-bg);
        }
    }

    // Statusbar / Resize
    .note-statusbar {
        background-color: var(--table-header-bg);
        border-top: 1px solid var(--border-medium);

        body.theme-night & {
            background-color: var(--sidebar-bg);
            border-top-color: var(--button-bg);
        }

        .note-resizebar {
            border-top: 1px solid var(--border-light);
        }
    }

    // Inputs within Summernote
    .note-input {
        color: var(--text-color);
        background-color: var(--content-bg);
        border: 1px solid var(--border-medium);

        body.theme-night & {
            background-color: var(--page-bg);
            border-color: var(--button-bg);
        }
    }
}
