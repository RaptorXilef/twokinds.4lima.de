// SPDX-License-Identifier: CC BY-NC-SA 4.0

///
/// Archiv-Übersicht.
///
/// Styling für die Kapitel-Liste, inkl. Akkordeon-Funktion und Links.
/// Styles für die Comic-Archiv Übersicht (Text & Layout).
///

/*!
 * @file       resources/scss/pages/_archive.scss
 */
/// @link      twokinds.4lima.de
///
/// @copyright (c) 2025 Felix Maywald. CC BY-NC-SA 4.0
/// @license   https://github.com/RaptorXilef/twokinds.4lima.de/blob/main/LICENSE
///
/// @author    Felix Maywald (@RaptorXilef)
/// @link      https://github.com/RaptorXilef/twokinds.4lima.de
///

///
/// @since    5.0.0
/// - Refactoring auf CSS Vars.
/// - style(Linter): Spezifitätsprobleme bei Link-Hover behoben.
/// - style(Linter): Link-Hover Reihenfolge korrigiert.
/// - fix(CSS): Linter-Fehler (no-descending-specificity) durch Umsortierung der Hover-States behoben.
/// - style(Linter): Block-Reihenfolge getauscht (.chapter-links vor .chapter) und Img-Selektoren sortiert.
/// - style(Linter): Interne Reihenfolge von Links und Bildern in .chapter-links korrigiert (Low -> High Specificity).
/// - style(Linter): Theme-Overrides separiert und ans Ende verschoben.
/// - chore(Linter): False-Positive bei Dark-Mode Link-Spezifität global für den Theme-Block ignoriert.
/// - refactor(SCSS): .chapter-links in eigene Komponente ausgelagert.
/// - style(Refactor): Nesting reduziert (Phase 2 Flattening).
///

// Verwendete SCSS-Variablen:
// (Keine spezifischen SCSS-Vars in diesem Block)

// Verwendete CSS-Variablen (Custom Properties):
// - --text-color: Standard Textfarbe
// - --text-on-medium: Textfarbe für Links/Header (Standard)
// - --link-color: Akzentfarbe für Links und Hover
// - --border-medium: (Indirekt genutzt in globalen Elementen)

@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

.chapter {
    margin-bottom: 15px;
    font-size: 1rem;

    p {
        margin: 0.8rem 1.5rem;
        font-style: italic;
        color: var(--text-color-light);

        a {
            font-weight: 700;
            color: var(--text-on-medium); // Im Original Schwarz/Dunkelgrau
        }
    }
}

// Dark Mode Override für Links
body.theme-night .chapter p a {
    color: var(--link-color);
}

// Chapter Headline (Akkordeon-Trigger)
.chapter h2 {
    display: flex; // Flexbox statt inline-block
    align-items: center; // Vertikale Zentrierung
    // width: 100%; // Volle Breite nutzen
    margin: 0;
    font-size: 1.2em;
    color: var(--text-on-medium);
    cursor: pointer;
    border-bottom: 1px solid transparent; // Unsichtbarer Border um Layout-Shifts zu vermeiden

    @include media-retina-mobile {
        font-size: 2em;
    }
}

// Hover State für Headline
.chapter h2:hover {
    color: var(--link-color);
    text-decoration: none;
    border-bottom-color: var(--link-color);
}

// Dark Mode Override für Headline
body.theme-night .chapter h2 {
    color: var(--text-color);
}

body.theme-night .chapter h2:hover {
    color: var(--link-color);
}

// Collapsible Arrow (Indikator)
// Standard-Status: Ausgeklappt (Pfeil nach unten)
.chapter h2::before {
    display: inline-block;
    flex-shrink: 0; // Verhindert das Quetschen des Symbols
    margin-right: 10px;
    content: '►'; // Als führender optischer Pfeil, der auf die Überschrift zeigt
    // transform: rotate(90deg);
    // transition: transform 0.2s;
}

// Status: Eingeklappt (Pfeil nach rechts)
.chapter.collapsed h2::before {
    transform: rotate(0deg);
}

// Der zweite Pfeil (span.arrow-left) an den rechten Rand schieben
.chapter h2 .arrow-left {
    flex-shrink: 0;
    margin-left: auto; // Das ist der "Zaubertrick", der alles nach rechts schiebt
}

// Content visibility toggle
// Versteckt die .chapter-links (Thumbnail Grid), wenn eingeklappt
.chapter.collapsed .chapter-links {
    display: none;
}
