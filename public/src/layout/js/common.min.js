(()=>{var themes=[{id:0,name:"Default",class:null},{id:1,name:"Lights On",class:null},{id:2,name:"Lights Off",class:"theme-night"}];var systemThemeId=0;var systemLightThemeId=1;var systemDarkThemeId=2;var currentTheme=systemThemeId;document.addEventListener("DOMContentLoaded",()=>{var body=document.getElementsByTagName("body")[0];document.querySelectorAll(".jsdep").forEach(el=>el.classList.remove("jsdep"));document.querySelector("#toggle_lights").addEventListener("click",toggleTheme);if(typeof window.localStorage!="undefined"){if(typeof window.localStorage.themePref=="undefined"){setTheme(systemThemeId,false,false)}else{setTheme(window.localStorage.themePref,false,false)}}else{body.classList.remove("preload")}if(typeof window.isAdminPage==="undefined"||!window.isAdminPage){body.addEventListener("keyup",e=>{if(e.which==73){toggleTheme(e)}})}if(window.matchMedia){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{if(currentTheme==systemThemeId){setTheme(systemThemeId,false,true)}})}});function toggleTheme(e){if(typeof e!=="undefined"){e.preventDefault()}var themeToSelect=(currentTheme+1)%themes.length;setTheme(themeToSelect,true,true)}function setTheme(themeId,storePref,doTransition){var body=document.getElementsByTagName("body")[0];var theme=themes[themeId];var isSystemTheme=themeId==systemThemeId;body.classList.forEach(cls=>{if(cls.startsWith("theme-")){body.classList.remove(cls)}});if(doTransition){body.classList.add("transitioning")}if(isSystemTheme){setSystemTheme(doTransition)}if(theme.class!=null){body.classList.add(theme.class)}document.querySelector("#toggle_lights .themename").innerHTML=theme.name;if(storePref&&typeof window.localStorage!="undefined"){if(!isSystemTheme){window.localStorage.setItem("themePref",themeId)}else{window.localStorage.removeItem("themePref")}}currentTheme=themeId;resetTransitionState()}function setSystemTheme(doTransition){if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches){setTheme(systemDarkThemeId,false,doTransition)}else{setTheme(systemLightThemeId,false,doTransition)}}function resetTransitionState(){var body=document.getElementsByTagName("body")[0];window.setTimeout(()=>{body.classList.remove("transitioning");body.classList.remove("preload")},300)}})();