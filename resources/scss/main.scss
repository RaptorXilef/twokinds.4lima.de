/**
 * Main CSS Design
 *
 * @file      ROOT/resources/scss/main.scss
 * @package   twokinds.4lima.de
 * @author    Felix M. (@RaptorXilef)
 * @copyright 2025 Felix M.
 * @license   Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International <https://github.com/RaptorXilef/twokinds.4lima.de/blob/main/LICENSE>
 * @link      https://github.com/RaptorXilef/twokinds.4lima.de
 * @version   2.1.2
 * @since     2.1.2 Der Innenabstand (padding) der `.transcript-content` Box wurde von 3px auf 15px erhöht.
 */

@use 'sass:color'; // Importieren zur Konsistenz

$base_url: 'https://twokinds.4lima.de';

// --- Farbvariablen (Light Mode) ---
$page-bg         : #81DBFE; // Heller blauer Hintergrund
$content-area-bg : #fff; // Weißer Hintergrund für den Hauptcontainer
$content-bg      : #fafafa; // Weißer Hintergrund für den Inhaltsbereich
$content-box     : #ffffff; // Weißer Hintergrund für den Inhaltsbereich

$sidebar-bg    : #d1e5d4; // Helles Grün für Sidebar
$header-bg     : #DDEAD7; // Blassgrün für Seitenheader
$menu-bg       : #effff2; // Sehr helles Grün für Menüpunkte
$menu-hover-bg : #fff; // Weißer Hover für Menüpunkte

$button-bg         : #d1e5d4; // Helles Grün für Buttons (wie Sidebar)
$button-hover-bg   : #b1cab5; // Dunkleres Grün für Button-Hover
$button-disabled-bg: #e0e0e0; // Grau für deaktivierte Buttons

$comic-nav-bg               : #c8e0c8; // Grün für Comic-Navigation
$comic-nav-hover-bg         : #aac8aa; // Helleres Grün für Hover
$comic-nav-archive-bg       : #5d7b5d; // Dunkles Grün für Archiv-Button
$comic-nav-archive-hover-bg : #789e78; // Helleres dunkles Grün für Hover

$theme-label-bg : #7BA181; // Grün für Theme-Label
$new-tag-bg     : #7BA181; // Grün für "New"-Tag

$text-color        : #333; // Dunkelgrau für Haupttext (statt reinem Schwarz)
$text-color-light  : #555; // Helleres Grau für sekundären Text/Labels
$text-color-medium : #666; // Mittelgrau (z.B. für Bild-Labels im Modal)
$text-color-faded  : #999; // Sehr helles Grau (z.B. für Placeholder)
$text-on-dark-bg   : #fff; // Weißer Text auf dunklen Hintergründen (z.B. Archiv-Button)
$text-on-medium-bg : #000; // Schwarzer Text auf mittleren Hintergründen (z.B. Buttons, Banner)

$link-color        : #08c; // Standard-Blau für Links
$link-visited-color: #08c; // Gleiches Blau für besuchte Links

$border-color-light : #ddd; // Helle Ränder
$border-color-medium: #ccc; // Mittlere Ränder
$border-color-dark  : #888; // Dunklere Ränder (z.B. Modal)
$border-color-black : #000; // Schwarze Ränder (z.B. Tabelle)

// Statusfarben
$status-green-bg     : #d4edda;
$status-green-text   : #155724;
$status-green-border : #c3e6cb;
$status-red-bg       : #f8d7da;
$status-red-text     : #721c24;
$status-red-border   : #f5c6cb;
$status-orange-bg    : #fff3cd;
$status-orange-text  : #856404;
$status-orange-border: #ffeeba;

// Admin Tabellenfarben
$table-header-bg    : #e9ecef; // Hellgrauer Header
$table-row-even-bg  : #f8f9fa; // Sehr hellgraue Zeile
$table-row-hover-bg : #e2e6ea; // Etwas dunklerer Hover

// Admin Button Farben
$button-green        : #28a745;
$button-green-hover  : #218838;
$button-orange       : #fd7e14;
$button-orange-hover : #e66a00;
$button-blue         : #007bff;
$button-blue-hover   : #0056b3;
$button-grey         : #6c757d;
$button-grey-hover   : #5a6268;

// --- Globale Stile ---
* {
	margin : 0;
	padding: 0;
}

img {
	border: none;
}

html {
	width: 100%;
}

body {
	background-color: $page-bg;
	font-family     : "Lucida Grande", Arial, "Open Sans", sans-serif;
	font-size       : 15px;
	min-width       : 1099px;
	color           : $text-color; // Standard-Textfarbe gesetzt
}

.mono {
	font-family: "Lucida Console", Courier, monospace;
}

h3 {
	margin-bottom: 0.7rem;
}

body.transitioning:not(.preload),
body.transitioning:not(.preload) * {
	-webkit-transition: background-color 0.25s, border-color 0.25s, background-image 0.25s;
	transition        : background-color 0.25s, border-color 0.25s, background-image 0.25s;
}

body.transitioning:not(.preload) {
	-webkit-transition: background-color 0.25s, color 0.25s;
	transition        : background-color 0.25s,
		color 0.25s;
}

.jsdep {
	display: none !important;
}

/* GLOBAL STYLES */
article {
	width : 825px;
	margin: auto;
}

h1,
h2,
h3,
h4,
h5,
h6 {
	font-weight: bold;
}

p {
	margin-bottom: 10px;
}

h1.page-header,
h2.page-header,
h3.page-header,
h4.page-header,
h5.page-header,
h6.page-header {
	background-color: $header-bg;
	padding         : 2px 10px;
	margin-bottom   : 10px;
	font-size       : 22.5px;
	color           : $text-color; // Standard-Textfarbe auch hier
}

.maintbanner {
	font-size       : 0.9em;
	padding         : 1em 8em;
	text-align      : center;
	background-color: #F5D568; // Gelb beibehalten für Hervorhebung
	color           : $text-on-medium-bg; // Schwarz
	position        : relative;
	z-index         : 200;

	a,
	a:link,
	a:visited,
	a:active {
		color: $text-on-medium-bg; // Schwarz
	}
}

.instructions {
	text-align: center;
	margin    : 15px 0;
	font-style: italic;
	color     : $text-color-light; // Hellerer Text
}

.smalltext {
	font-size: 12px;
}

.tinytext {
	margin-bottom: 5px;
	font-size    : 9px;
}

.tinyheader {
	font-size     : 10px;
	margin-bottom : 4px;
	text-align    : center;
	text-transform: uppercase;
}

.clear {
	clear: left;
}

.float-left {
	float       : left;
	margin-right: 10px;
}

.center {
	text-align: center;
	margin    : auto;
}

hr {
	border-color : $header-bg; // Gleiche Farbe wie Header-BG
	border-bottom: none;
	margin-block : 1rem;
	border       : none;
	border-top   : 1px solid;
}

[hidden] {
	display: none;
}

/* MAIN PAGE CONTAINER */
.main-container {
	width             : 1079px;
	margin            : auto;
	background-color  : $content-area-bg;
	-webkit-box-shadow: 0px 0px 3px 1px rgba(0, 0, 0, 0.5);
	box-shadow        : 0px 0px 3px 1px rgba(0, 0, 0, 0.5);
	overflow          : visible;

	button,
	a.button {
		background      : none;
		color           : $text-on-medium-bg; // Schwarzer Text auf hellem Grün
		border          : none;
		padding         : 0;
		font            : inherit;
		cursor          : pointer;
		outline         : inherit;
		font-style      : initial;
		font-size       : initial;
		background-color: $button-bg;
		border-radius   : 3px;
		padding         : 3px 5px;
		text-decoration : none;

		&:hover {
			background-color: $button-hover-bg;
		}
	}

	button:disabled {
		cursor          : not-allowed;
		opacity         : 0.5;
		background-color: $button-disabled-bg;
	}

	.arrow-down,
	.arrow-left {
		display        : inline-block;
		width          : 1em;
		height         : 0.6em;
		background     : transparent url($base_url + "/assets/images/layout/ui/dropdown.svg?c=20251024") 50% 50% no-repeat;
		background-size: contain;

		&.animate {
			transition: rotate 0.1s;
		}
	}

	.arrow-left {
		rotate: -90deg;
	}
}

/* BANNER */
.banner {
	width      : 1099px;
	height     : 314px;
	padding-top: 10px;
	position   : relative;
	z-index    : 99;
	margin-left: -10px;
	background : transparent url($base_url + "/assets/images/layout/banner.webp?c=20251024") 0 10px no-repeat;
	text-indent: 105%;
	white-space: nowrap;
	overflow   : hidden;
}

/* MAIN CONTENT AREA */
.content-area {
	display      : flex;
	flex-flow    : nowrap;
	align-items  : stretch;
	position     : relative;
	z-index      : 100;
	margin-top   : -15px;
	padding-top  : 11px;
	height       : 100%;
	margin-bottom: 15px;
}

/* NAVIGATION MENU */
.menu {
	font-size    : 14px;
	margin-bottom: 10px;

	a {
		color           : $text-on-medium-bg; // Schwarz auf sehr hellem Grün
		display         : block;
		list-style-type : none;
		width           : 160px;
		background-color: $menu-bg;
		border-radius   : 4px;
		text-transform  : uppercase;
		margin          : 3px auto;
		overflow        : hidden;
		padding         : 3px 0;
		text-decoration : none;
		cursor          : pointer;
		position        : relative;

		&:hover {
			background-color: $menu-hover-bg;
		}
	}

	a.theme {
		display        : flex;
		flex-flow      : column nowrap;
		align-items    : stretch;
		justify-content: flex-start;
		padding        : 0;
		margin-top     : 10px;

		span.themelabel {
			flex            : 0 0 0;
			padding         : 1px;
			background-color: $theme-label-bg;
			color           : $text-on-dark-bg; // Weiß auf Grün
			font-size       : 0.7em;
		}

		span.themename {
			text-align: center;
			flex      : 1 1 auto;
			padding   : 3px;
			color     : $text-on-medium-bg; // Textfarbe für den Namen
		}
	}

	// a:hover already defined above

	a.menu-new:after {
		content         : "New";
		display         : inline-block;
		width           : 26px;
		background-color: $new-tag-bg;
		color           : $text-on-dark-bg; // Weiß auf Grün
		font-size       : 0.7em;
		position        : absolute;
		top             : 6px;
		left            : -6px;
		transform       : rotate(-90deg);
	}
}

/* SIDEBAR */
.sidebar {
	display: inline-block;
	flex   : 0 0 200px;
	display: flex;
}

.sidebar-content {
	width           : 167px;
	padding         : 11px 4px 7px 4px;
	text-align      : center;
	border-radius   : 0 0 5px 5px;
	margin-left     : 12px;
	background-color: $sidebar-bg;

	.full-width-img {
		margin-left: -5px;
	}
}

.incentive {
	width        : 160px;
	margin       : auto;
	margin-bottom: 10px;

	.tinytext {
		margin-bottom: 2px;
	}
}

.content {
	flex            : 1 1 auto;
	position        : relative;
	z-index         : 102;
	display         : inline-block;
	padding         : 10px 15px;
	padding-top     : 11px;
	margin-right    : 11px;
	overflow        : visible;
	border          : 1px solid $border-color-medium;
	border-radius   : 0 0 5px 5px;
	background-color: $content-bg;

	li {
		margin-bottom      : 5px;
		list-style-position: inside;
		margin-left        : 30px;
		margin-right       : 30px;
	}

	ul {
		margin-bottom: 10px;
	}

	table {
		border         : 1px solid $border-color-black;
		border-collapse: collapse;
		margin-bottom  : 10px;
	}

	th {
		background-color: $header-bg; // Wie Seitenheader
	}

	th,
	td {
		padding: 2px 7px;
		border : 1px solid $border-color-black;
	}

	a {
		color: $link-color;

		&:visited {
			color: $link-visited-color;
		}
	}
}

.content-bottom {
	width        : 1079px;
	height       : 4px;
	margin-bottom: 15px;
}

/* BANNER ADS */
.abg-sidebar {
	max-height: 630px;
	width     : 160px;
	margin    : auto;
	overflow  : hidden;

	.advertisement {
		margin: 10px 0 20px 0;
		height: 600px;
	}
}

.av2 {
	margin       : auto;
	width        : 300px;
	height       : 268px;
	overflow     : hidden;
	margin-bottom: 8px;
}

.av2-child {
	position: relative;
	width   : 300px;
	height  : 250px;
	overflow: hidden;

	.advertisement {
		position        : absolute;
		top             : 0;
		left            : 0;
		z-index         : 1000;
		background-color: $content-bg; // Anpassen
	}
}

.ad-top {
	margin        : auto;
	height        : 90px;
	min-width     : 728px;
	max-width     : 970px;
	padding-top   : 20px;
	padding-bottom: 9px;
	overflow      : hidden;
}

.bottom {
	border       : 1px solid $border-color-medium;
	border-radius: 5px;
	width        : 1039px;
	margin       : auto;
	min-height   : 350px;
	padding      : 8px 8px;
	margin-bottom: 10px;
	display      : flex;
	flex-flow    : row nowrap;
	gap          : 10px;

	.bottom-left {
		flex           : 0 0 160px;
		display        : flex;
		flex-direction : column;
		justify-content: flex-start;
	}

	.bottom-ctr {
		flex    : 1 1 100%;
		overflow: hidden;

		.twitter-box {
			height  : 377px;
			overflow: auto;
		}
	}

	.bottom-right {
		flex: 0 0 300px;
	}
}

.donate-box {
	width   : 300px;
	height  : 250px;
	position: absolute;
	top     : 0;
	left    : 0;
	z-index : 999;
}

.rec-comic {
	width          : 100%;
	margin         : -4px auto 0 auto;
	display        : flex;
	flex-flow      : row wrap;
	justify-content: center;

	.rec-comic-btn {
		flex            : 0 0 88px;
		height          : 31px;
		margin          : 4px 2px 0px 2px;
		background-color: $border-color-medium; // Angepasst
	}
}

/* FOOTER */
footer {
	text-align: center;
	font-size : 12px;
	color     : $text-color; // Standardtextfarbe
}

.footer-img {
	width     : 100%;
	height    : 89px;
	background: transparent url($base_url + "/assets/images/layout/footer.webp?c=20251024") 50% 0 no-repeat;
	margin-top: 5px;
}


/* COMIC SECTION */
.comic {
	text-align: center;
	margin    : auto;

	h1 {
		font-weight  : normal;
		font-size    : 18px;
		margin-bottom: 5px;
	}

	header {
		margin-bottom: 15px;
	}

	.transcript {
		text-align: left;
		margin-top: 15px;
		font-size : 0.8em;

		.transcript-header {
			display        : flex;
			justify-content: space-between;
			align-items    : center;
			margin-bottom  : 5px;
			/* Hinzugefügt */
		}

		.transcript-content {
			background-color  : $content-box;
			border            : 1px solid $border-color-medium;
			max-height        : 550px;
			overflow          : auto;
			padding           : 15px;
			margin-top        : 5px;
			border-radius     : 8px;
			-webkit-box-shadow: inset 0 1px 1px 0 rgba(0, 0, 0, .35);
			box-shadow        : inset 0 1px 1px 0 rgba(0, 0, 0, .35);

			p {
				margin-bottom: 7px;
			}

			p:last-of-type {
				margin-bottom: 0;
			}
		}
	}

	.below-nav {
		font-size      : 0.9em;
		font-style     : italic;
		margin-top     : 3px;
		margin-bottom  : 0;
		text-align     : left;
		display        : flex;
		flex-flow      : row nowrap;
		gap            : 1rem;
		justify-content: space-between;
		align-items    : center;

		.nav-instruction {
			flex: 1 1 auto;
		}

		.bookmark-control {
			flex           : 0 0 auto;
			display        : flex;
			flex-flow      : row nowrap;
			justify-content: flex-end;
			align-items    : center;

			.arrow-left {
				font-size: 1.4em;
			}

			.button {
				font-size: 1em;
			}
		}
	}

	.tag-wrapper {
		display        : flex;
		flex-flow      : row nowrap;
		gap            : 1rem;
		justify-content: space-between;
		align-items    : flex-start;
		margin-top     : 10px;

		.comic-tags {
			flex       : 1 1 auto;
			text-align : left;
			font-size  : 0.9em;
			display    : flex;
			flex-flow  : row wrap;
			gap        : 0.3rem;
			row-gap    : 0.5rem;
			align-items: center;

			.button {
				font-size: 1em;
			}
		}

		.permalink {
			flex       : 0 0 auto;
			font-size  : 0.9em;
			padding-top: 3px;
		}
	}

	.comic-footer {
		margin-top: 7px;
	}

	.comic-header {
		margin-bottom: 7px;
		position     : relative;
		/* HINZUGEFÜGT */
	}


	.comicnav {
		width             : 825px;
		text-align        : center;
		margin            : 0 auto 15px auto;
		color             : $text-on-medium-bg; // Schwarz
		background-color  : $comic-nav-bg;
		border-radius     : 3px;
		padding           : 7px 0;
		-webkit-box-shadow: inset 0px 2px 2px 0px rgba(0, 0, 0, 0.35);
		box-shadow        : inset 0px 2px 2px 0px rgba(0, 0, 0, 0.35);
		display           : flex;
		flex-flow         : row nowrap;
		gap               : 0.5rem;
		justify-content   : center;
		align-items       : center;
		position          : relative;

		&.bottomnav {
			margin-top   : 15px;
			margin-bottom: 0;
		}

		button.bookmark {
			height         : 36px;
			transform      : translateY(-36px);
			width          : 27px;
			flex           : 0 0 auto;
			background     : url($base_url + "/assets/images/layout/ui/bookmark.png?c=20251024") 0 0 no-repeat;
			background-size: contain;
			overflow       : hidden;
			text-indent    : -100em;
			white-space    : nowrap;
			position       : absolute;
			top            : 0;
			right          : 1rem;
			z-index        : 1000;
			border-radius  : 0;

			&.bookmarked {
				background     : url($base_url + "/assets/images/layout/ui/bookmark_active.png?c=20251024") 0 0 no-repeat;
				background-size: contain;
			}
		}

		img {
			margin: 0 4px;
		}

		a,
		button {
			color          : $text-on-medium-bg; // Schwarz
			text-decoration: none;
		}

		.navarrow {
			display         : inline-flex;
			flex-flow       : row nowrap;
			align-items     : stretch;
			justify-content : center;
			margin          : 0 3px;
			border-radius   : 4px;
			width           : 138px;
			padding         : 2px 5px;
			background-color: transparent;
			text-align      : center;
		}

		.nav-wrapper {
			display    : flex;
			align-items: center;
		}

		.navarrow:not(.disabled):hover {
			background-color: $comic-nav-hover-bg;
		}

		.navbegin .nav-wrapper {
			background  : url($base_url + "/assets/images/layout/navigation/comic-nav-begin.png?c=20250916") 0 50% no-repeat;
			padding-left: 35px;
		}

		.navprev .nav-wrapper {
			background  : url($base_url + "/assets/images/layout/navigation/comic-nav-arrow-left.png?c=20250916") 0 50% no-repeat;
			padding-left: 26px;
		}

		.navnext .nav-wrapper {
			background   : url($base_url + "/assets/images/layout/navigation/comic-nav-arrow-right.png?c=20250916") 100% 50% no-repeat;
			padding-right: 26px;
		}

		.navend .nav-wrapper {
			background   : url($base_url + "/assets/images/layout/navigation/comic-nav-end.png?c=20250916") 100% 50% no-repeat;
			padding-right: 35px;
		}

		.navarchive {
			display         : inline-flex;
			flex-flow       : row nowrap;
			align-items     : stretch;
			justify-content : center;
			border-radius   : 14px;
			text-align      : center;
			padding         : 2px 20px;
			margin          : 0 6px;
			color           : $text-on-dark-bg; // Weiß
			background-color: $comic-nav-archive-bg;

			&:hover {
				background-color: $comic-nav-archive-hover-bg;
			}
		}

		// .navarchive:hover removed because nested now

		.disabled {
			opacity: 0.4;
			cursor : default;
		}

		&.bottomnav {
			.nav-lang-toggle {
				width: auto;

				.nav-wrapper {
					background  : url($base_url + "/assets/images/layout/navigation/comic-nav-de-en.png?c=20250916") 0 50% no-repeat;
					padding-left: 55px;
				}
			}
		}
	}

	#comic-image {
		width        : 100%;
		height       : auto;
		border-radius: 7px;
		/* HINZUGEFÜGT */
	}
}

/* BEGIN ALTERNATE PAGES */

/* LINKS PAGE */
.link-segment {
	margin       : 6px 0;
	margin-bottom: 10px;

	.link-img {
		margin-top: 2px;
	}

	p {
		margin: 0;
	}
}

.imggroup {
	margin    : auto;
	text-align: center;

	img {
		cursor: pointer;
	}
}

.dual-img img,
.many-img img {
	margin-left : 1px;
	margin-right: 1px;
}

.link-img {
	height      : 100%;
	width       : 200px;
	float       : left;
	margin-left : 10px;
	margin-right: 20px;
}

/* POPUP DIALOG */
.dialog * {
	margin: 0;
}

.dialog {
	border-radius: 5px;
	background   : $content-bg; // Weiß
	width        : 490px;
	position     : fixed;
	margin       : auto;
	display      : none;
	z-index      : 200;
	box-shadow   : 0 0 4px 0 rgba(0, 0, 0, 0.6);

	img {
		object-fit: contain;
		max-width : 100%;
	}

	a {
		color          : $text-on-medium-bg; // Schwarz
		text-decoration: none;
	}

	.dialog-body {
		padding    : 10px;
		padding-top: 0;
	}

	.dialog-title {
		background-color: $button-hover-bg; // Dunkleres Grün
		border-radius   : 3px 3px 0 0;
		padding         : 5px 10px;
		margin-bottom   : 10px;
		margin-left     : -10px;
		width           : 470px;
		color           : $text-on-medium-bg; // Schwarz
	}

	.dialog-center {
		text-align   : center;
		margin-bottom: 5px;
	}

	.dialog-x {
		display      : inline-block;
		background   : $content-bg; // Weiß
		color        : $text-color-light; // Grau
		font-size    : 12px;
		text-align   : center;
		font-weight  : bold;
		cursor       : pointer;
		line-height  : 13px;
		height       : 1.1em;
		width        : 1.1em;
		padding      : 3px;
		margin-top   : 1px;
		margin-right : -5px;
		border-radius: 2px;

		&:hover {
			// Hover für X
			background-color: $button-disabled-bg; // Grau
			color           : $text-on-medium-bg; // Schwarz
		}
	}

	.dialog-title .dialog-x {
		float: right;
	}

	.dialog-input-header {
		font-weight: bold;
	}

	input.embed {
		padding      : 2px;
		font-size    : 14px;
		margin-top   : 2px;
		margin-bottom: 5px;
		width        : 465px;
		border       : 1px solid $border-color-medium; // Standard-Rand
	}
}

/* ARCHIVE PAGE */
.chapter {
	font-size    : 14px;
	margin-bottom: 15px;

	p {
		margin-inline: 0.5rem;
		margin-top   : 0.3rem;
		text-align   : justify;

		a {
			color: $text-on-medium-bg; // Schwarz
		}
	}

	h2 {
		display  : inline-block;
		margin   : 0;
		cursor   : pointer;
		color    : $text-on-medium-bg; // Schwarz
		font-size: 1.2em;
	}

	h4:hover {
		text-decoration: underline;
	}
}

.chapter-links {
	display  : flex;
	flex-flow: row wrap;
	gap      : 6px 6px;

	noscript {
		display: block;
	}

	&.tag-page-links a {
		width : 100px;
		height: 130px;
	}

	a {
		display         : inline-block;
		width           : 80px;
		height          : 104px;
		background-color: #eee; // Helles Grau
		text-decoration : none;
		color           : $text-on-medium-bg; // Schwarz
		font-size       : 1.2em;
		position        : relative;
		overflow        : hidden;

		&:hover {
			// Hover für Thumbnails
			box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
		}

		span {
			display        : flex;
			justify-content: center;
			align-items    : center;
			width          : 100%;
			height         : 100%;
			text-align     : center;
			position       : absolute;
			top            : 0;
			left           : 0;
			z-index        : 80;
		}

		.delete {
			position  : absolute;
			z-index   : 91;
			top       : 4px;
			right     : 2px;
			background: none;
			margin    : 0;
			padding   : 0;

			svg {
				width       : 24px;
				height      : 24px;
				color       : #f00; // Rot
				stroke      : $text-on-dark-bg; // Weißer Rand
				stroke-width: 2px;
				filter      : drop-shadow(0 0 1px rgba(0, 0, 0, 0.5)); // Kleiner Schatten
			}

			&:hover svg {
				color: #c00; // Dunkleres Rot bei Hover
			}
		}
	}

	a.loaded img,
	a noscript img,
	&.tag-page-links a img {
		opacity: 1;
	}

	img:not(.delicon) {
		opacity   : 0;
		transition: opacity 0.5s;
		object-fit: contain;
		max-width : 100%;
		position  : absolute;
		top       : 50%;
		left      : 0;
		transform : translateY(-50%);
		z-index   : 90;
	}

	a.loaded span,
	a.noscript span,
	&.tag-page-links a span {
		background-color: rgba(0, 0, 0, 0.5); // Halbtransparent Schwarz
		color           : $text-on-dark-bg; // Weiß
		display         : none;
		z-index         : 100;
	}

	a.loaded:hover span,
	a.noscript:hover span,
	&.tag-page-links a:hover span {
		display: flex;
	}
}

// Media Query bleibt unverändert, da es Größenanpassungen sind
@media only screen and (min-device-width: 320px) and (max-device-width: 640px) and (-webkit-min-device-pixel-ratio: 2) {
	.maintbanner {
		font-size: 1.2em;
	}

	.tinytext {
		font-size: 16px;
	}

	.tinyheader {
		font-size: 16px;
	}

	.chapter h2 {
		font-size: 2em;
	}

	.chapter-links {
		a {
			zoom: 1.8;

			.delete {
				top: 3px;

				svg {
					width : 16px;
					height: 16px;
				}
			}
		}

		a.loaded span,
		&.tag-page-links a span {
			display    : inline-block;
			height     : auto;
			bottom     : 0;
			top        : inherit;
			padding-top: 0;
		}

		&.tag-page-links a {
			zoom: 1.5;
		}
	}

	.comic {
		.transcript-content {
			font-size: 1.3em;
		}

		.comicnav {
			font-size: 1.1em;

			.navarchive,
			.navarrow {
				height: 50px;
			}

			.navarchive {
				border-radius: 7px;
			}

			button.bookmark {
				height         : 45px;
				width          : 34px;
				transform      : translateY(-34px);
				background-size: cover;
				top            : -11px;

				&.bookmarked {
					background-size: cover;
				}
			}
		}

		.below-nav {
			font-size : 1.2em;
			margin-top: 0.5rem;

			.nav-instruction-content {
				display: none;
			}

			.bookmark-control .button {
				font-size: 1.1em;
			}
		}

		.tag-wrapper {
			.comic-tags {
				font-size: 1.2em;
			}

			.permalink {
				font-size: 1.2em;
			}
		}
	}

	.menu {
		font-size: 1.1em;

		a {
			padding: 8px 0;
			margin : 8px auto;
		}

		a.menu-new {
			padding-top   : calc(0.7em + 5px);
			padding-bottom: calc(8px - 0.7em + 5px);

			&:after {
				// Korrekte Verschachtelung
				width    : auto;
				top      : 0;
				left     : 0;
				right    : 0;
				transform: none;
			}
		}
	}
}


/* FAQ */
div.page-faq {
	section {
		padding-top: 10px;
		margin-top : 10px;
		border-top : 1px solid $border-color-medium;

		h2 {
			font-size    : 15px;
			margin-bottom: 5px;
		}
	}
}

/* CHAT PAGE */
div.page-chat {
	section {
		margin-bottom: 15px;
	}

	.chat-button {
		text-align: center;
		padding   : 5px 0 15px 0;
		margin    : 1.5rem 0 0 0;

		a {
			padding         : 5px 40px;
			font-size       : 20px;
			text-decoration : none;
			border-radius   : 5px;
			background-color: $comic-nav-archive-bg; // Gleiche Farbe wie Archiv-Button
			color           : $text-on-dark-bg; // Weiß

			&:hover {
				background-color: $comic-nav-archive-hover-bg;
			}
		}

		// a:hover removed because nested
	}
}

/* CHARACTER PAGE */
.char-detail {
	padding      : 10px;
	border-bottom: 1px solid $border-color-medium;
	margin-bottom: 10px;

	h3 img {
		vertical-align: middle;
	}

	h3,
	p {
		margin-bottom: 10px;
		text-align   : justify;
	}

	img.portrait {
		margin-top: 0;
	}

	.char-info {
		float: left;
		width: 600px;
	}

	.char-img {
		float       : left;
		width       : 175px;
		margin-right: 20px;
		text-align  : center;
	}
}

.char-detail:last-of-type {
	margin-bottom: 0;
	border       : none;
}


/* CHARAKTERS */
.comic-characters {
	background-color: $content-box;
}

/* ################################################################## */
/* ### NEUE STILE FÜR REPORTING-SYSTEM (v3.7.0.0) - LIGHT MODE ### */
/* ################################################################## */

/* --- Allgemeine Modal-Stile (Basis) --- */
.modal {
	display         : none;
	position        : fixed;
	z-index         : 1000;
	left            : 0;
	top             : 0;
	width           : 100%;
	height          : 100%;
	overflow        : auto;
	background-color: rgba(0, 0, 0, 0.6);
	align-items     : center;
	justify-content : center;
}

.modal-overlay {
	position: fixed;
	top     : 0;
	left    : 0;
	width   : 100%;
	height  : 100%;
	cursor  : pointer;
	z-index : 1001;
}

.modal-content {
	position        : relative;
	background-color: $content-bg; // Weiß
	margin          : auto;
	padding         : 25px;
	border          : 1px solid $border-color-dark; // Dunklerer Rand
	width           : 90%;
	max-width       : 700px;
	border-radius   : 8px;
	box-shadow      : 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
	z-index         : 1002;
	max-height      : 90vh;
	overflow-y      : auto;
}

.modal-close {
	color      : #aaa; // Helles Grau
	position   : absolute;
	top        : 10px;
	right      : 15px;
	font-size  : 28px;
	font-weight: bold;
	background : none;
	border     : none;
	cursor     : pointer;
	padding    : 0 5px;

	&:hover,
	&:focus {
		color          : $text-on-medium-bg; // Schwarz
		text-decoration: none;
	}
}

.modal-buttons {
	margin-top     : 20px;
	text-align     : right;
	display        : flex;
	gap            : 10px;
	justify-content: flex-end;
}

/* --- Report Modal Spezifisch --- */
.report-modal-content {
	.admin-form {
		// Wiederverwendung von Admin-Formular-Stilen
		display       : flex;
		flex-direction: column;
		gap           : 15px;

		label {
			font-weight  : bold;
			display      : block;
			margin-bottom: 5px;
			color        : $text-color-light; // Dunkelgrau
		}

		input[type="text"],
		select,
		textarea {
			width        : 100%;
			padding      : 8px 10px;
			border       : 1px solid $border-color-medium;
			border-radius: 4px;
			font-size    : 1em;
			box-sizing   : border-box;

			&:focus {
				border-color: $comic-nav-archive-bg; // Dunkelgrün
				box-shadow  : 0 0 0 2px rgba(93, 123, 93, 0.2); // Passender Schatten
				outline     : none;
			}
		}

		textarea {
			resize    : vertical;
			min-height: 80px;
		}

		select[required]:invalid {
			color: $text-color-faded; // Hellgrau
		}
	}

	.report-images-container {
		display        : flex;
		gap            : 15px;
		margin-top     : 10px;
		justify-content: space-around;
		flex-wrap      : wrap;

		div {
			text-align: center;
			flex      : 1;
			min-width : 200px;
		}

		img {
			max-width    : 100%;
			height       : auto;
			border       : 1px solid $border-color-light;
			border-radius: 4px;
			margin-top   : 5px;
		}

		label {
			font-size: 0.9em;
			color    : $text-color-medium; // Mittelgrau
		}
	}

	/* Status Meldungen */
	.status-message {
		padding      : 10px 15px;
		border-radius: 4px;
		margin       : 10px 0;
		border       : 1px solid transparent;
		font-size    : 0.95em;

		&.status-green {
			color           : $status-green-text;
			background-color: $status-green-bg;
			border-color    : $status-green-border;
		}

		&.status-red {
			color           : $status-red-text;
			background-color: $status-red-bg;
			border-color    : $status-red-border;
		}

		&.status-orange {
			color           : $status-orange-text;
			background-color: $status-orange-bg;
			border-color    : $status-orange-border;
		}
	}
}

/* --- "Fehler melden"-Button auf Comic-Seite --- */
#open-report-modal {
	padding         : 3px 8px;
	font-size       : 0.9em;
	background-color: $menu-bg; // Wie Menüpunkte
	border          : 1px solid $theme-label-bg; // Passender Rand
	border-radius   : 4px;
	color           : $text-color; // Standardtext
	cursor          : pointer;
	margin-left     : 10px;

	&:hover {
		background-color: $menu-hover-bg; // Weiß
		border-color    : $comic-nav-archive-bg; // Dunkelgrün
	}
}

/* --- Admin Report Management --- */
.filter-form {
	background-color: $table-row-even-bg; // Hellgrau
	border          : 1px solid $border-color-light; // Heller Rand
	padding         : 15px;
	margin-bottom   : 20px;
	border-radius   : 5px;

	legend {
		font-weight  : bold;
		margin-bottom: 10px;
		font-size    : 1.1em;
	}

	.filter-controls {
		display    : flex;
		flex-wrap  : wrap;
		gap        : 15px;
		align-items: flex-end;

		label {
			margin-bottom: 5px;
			font-size    : 0.9em;
			color        : $text-color-light;
		}

		input[type="text"],
		select {
			padding      : 6px 8px;
			border       : 1px solid $border-color-medium;
			border-radius: 4px;
		}

		// button erbt globalen Stil
	}
}

.data-table {
	width          : 100%;
	border-collapse: collapse;
	margin-bottom  : 20px;

	th,
	td {
		border        : 1px solid $border-color-light; // Heller Rand
		padding       : 10px;
		text-align    : left;
		vertical-align: top;
	}

	th {
		background-color: $table-header-bg;
		font-weight     : bold;
	}

	tbody tr:nth-child(even) {
		background-color: $table-row-even-bg;
	}

	tbody tr:hover {
		background-color: $table-row-hover-bg;
	}

	.actions-cell {
		white-space: nowrap;
		text-align : right;

		form {
			display  : inline-flex;
			flex-wrap: wrap;
			gap      : 5px;
			margin   : 0;
		}

		button {
			padding  : 4px 8px;
			font-size: 0.9em;
			color    : $text-on-dark-bg; // Weiß
		}

		.button-green {
			background-color: $button-green;

			&:hover {
				background-color: $button-green-hover;
			}
		}

		.button-orange {
			background-color: $button-orange;

			&:hover {
				background-color: $button-orange-hover;
			}
		}

		.button-blue {
			background-color: $button-blue;

			&:hover {
				background-color: $button-blue-hover;
			}
		}

		.detail-button {
			background-color: $button-grey;

			&:hover {
				background-color: $button-grey-hover;
			}

			color: $text-on-dark-bg;
		}
	}
}

/* Admin Detail Modal */
.report-detail-modal-content {
	h3 {
		margin-top    : 15px;
		margin-bottom : 8px;
		font-size     : 1.1em;
		border-bottom : 1px solid #eee; // Sehr heller Rand
		padding-bottom: 4px;
	}

	p strong {
		display  : inline-block;
		min-width: 90px;
	}

	.report-text-box {
		background-color: $table-row-even-bg; // Hellgrau
		border          : 1px solid $border-color-light; // Heller Rand
		padding         : 10px;
		border-radius   : 4px;
		margin-bottom   : 15px;
		font-size       : 0.95em;
		white-space     : pre-wrap;
		word-wrap       : break-word;
		max-height      : 200px;
		overflow-y      : auto;
	}

	#detail-suggestion {
		width           : 100%;
		box-sizing      : border-box;
		font-family     : inherit;
		background-color: #f1f1f1; // Leicht dunkleres Grau für readonly
		border          : none;
		resize          : none;
		padding         : 10px; // Padding hinzufügen
		border-radius   : 4px; // Abrundung
	}

	/* Diff-Viewer */
	.diff-box {
		.loading-text {
			color     : $border-color-dark; // Dunkelgrau
			font-style: italic;
		}

		ins {
			background-color: $status-green-bg;
			color           : $status-green-text;
			text-decoration : none;
		}

		del {
			background-color: $status-red-bg;
			color           : $status-red-text;
			text-decoration : none;
		}
	}
}

/* Honeypot Feld */
.honeypot-field {
	display: none !important;
}