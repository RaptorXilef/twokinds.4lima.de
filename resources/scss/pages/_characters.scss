// SPDX-License-Identifier: CC BY-NC-SA 4.0

///
/// Bookmarks und Charakter-Details.
///
/// Styling für die Lesezeichen-Verwaltung und die detaillierte Charakter-Ansicht.
/// Styles für Charakter-Übersichten und Lesezeichen.
///

/*!
 * @file       resources/scss/pages/_characters.scss
 */
/// @link      twokinds.4lima.de
///
/// @copyright (c) 2025 Felix Maywald. CC BY-NC-SA 4.0
/// @license   https://github.com/RaptorXilef/twokinds.4lima.de/blob/main/LICENSE
///
/// @author    Felix Maywald (@RaptorXilef)
/// @link      https://github.com/RaptorXilef/twokinds.4lima.de
///

///
/// @since    5.0.0
/// - Refactoring.
/// - fix(CSS): word-break deprecated property ersetzt.
/// - style(Linter): Selector Order korrigiert.
/// - style(Linter): Spezifität für Dark Mode Overrides durch Nesting korrigiert.
/// - style(Linter): Theme-Overrides in .char-detail ans Ende verschoben.
/// - style(Linter): Dateistruktur umgestellt (.bookmarks-page vor .char-detail), um absteigende Spezifität zu verhindern.
/// - refactor(CSS): Vollständige Trennung von Basis-Styles und Theme-Overrides.
/// - chore(Linter): False-Positive bei Dark-Mode Spezifität global für den Theme-Block ignoriert.
/// - refactor(SCSS): .tag-page-links entfernt (jetzt in components/_thumbnail-grid.scss).
/// - style(Refactor): Nesting reduziert (Phase 2 Flattening).
/// - fix: Fehlende Klasse .charaktere-overview für die Hauptübersicht hinzugefügt.
/// - fix: Clearfix für .char-detail hinzugefügt, um kollabierende Border zu verhindern.
/// - fix: Abstände für h3 innerhalb von .charaktere-overview korrigiert.- fix: Clearfix für .char-detail hinzugefügt, um kollabierende Border zu verhindern.
/// - fix: Abstände für h3 innerhalb von .charaktere-overview korrigiert.
///

// Verwendete SCSS-Variablen:
// - $base-url: Basis-URL für Assets

// Verwendete CSS-Variablen (Custom Properties):
// - --text-color: Standard Textfarbe
// - --border-medium: Mittlere Rahmenfarbe
// - --border-light: Helle Rahmenfarbe
// - --button-bg: Hintergrund für Buttons / Dark Mode Elemente
// - --cookie-btn-accept-bg: Primärfarbe (Grün)
// - --cookie-btn-accept-hover: Hover Primärfarbe
// - --link-color: Linkfarbe

@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

/* --- Bookmarks Page --- */
.bookmarks-page .page-header {
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: center;
    padding-top: 10px;
    margin-bottom: 0;
    font-size: 1.8em;
    font-weight: 300;
    text-align: center;
}

.bookmarks-page .page-header strong {
    font-weight: 700;
    color: #333;
}

.bookmarks-page .comic-count-badge {
    display: inline-block;
    padding: 4px 10px;
    font-size: 0.7em;
    font-weight: 700;
    line-height: 1;
    vertical-align: baseline;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    background-color: var(--cookie-btn-accept-bg);
    border-radius: 12px;
}

.bookmarks-page .bookmark-example {
    display: flex;
    flex-flow: row nowrap;
    gap: 0.5rem;
    align-items: center;
    justify-content: flex-end;
    margin-right: 1rem;
    margin-bottom: 0;
    font-size: 0.9em;
    font-style: italic;
    text-align: center;
}

// Ribbon Icon (Wiederhergestellt)
.bookmarks-page .bookmark-example .ribbon {
    flex: 0 0 auto;
    width: 27px;
    height: 36px;
    background: url('#{$base-url}/assets/images/layout/ui/bookmark.png') 0 0
        no-repeat;
    background-size: contain;
}

.bookmarks-page .bookmark-example {
    font-style: italic;
    color: #555;
}

.no-bookmarks {
    padding: 2rem 1rem;
    margin: 1rem;
    font-size: 1.2rem;
    color: #666;
    text-align: center;
    border: 2px dashed #ccc;
    border-radius: 5px;
}

.no-bookmarks p {
    margin: 0;
    line-height: 1.5;
}

.bookmarks-controls {
    padding-top: 20px;
    margin-top: 20px;
    text-align: center;
}

.bookmarks-controls hr {
    height: 1px;
    margin-bottom: 20px;
    background-color: var(--border-light);
    border: 0;
}

.bookmarks-controls button {
    padding: 10px 15px;
    margin: 5px;
    font-size: 0.9em;
    color: white;
    cursor: pointer;
    background-color: var(--cookie-btn-accept-bg);
    border: none;
    border-radius: 5px;
    transition: background-color 0.2s;
}

.bookmarks-controls button:hover {
    background-color: var(--cookie-btn-accept-hover);
}

.bookmarks-controls .hidden-file-input {
    display: none;
}

// - .charaktere-overview: Container für die Charakter-Listenansicht
.charaktere-overview {
    padding-top: 0;
    padding-bottom: 0;

    h3 {
        margin-top: 20px;
        margin-bottom: 15px;
        border-bottom: 1px solid var(--border-medium);
    }
}

/* --- Character Detail Page (Wiederhergestellt) --- */
.char-detail {
    @include clearfix; // Nutzt das Mixin aus abstracts/_mixins.scss

    padding: 15px 10px;
    margin-bottom: 10px;
    color: var(--text-color);
    border-bottom: 1px solid var(--border-medium);
}

.char-detail:last-of-type {
    margin-bottom: 0;
    border: none;
}

.char-detail h3 {
    margin-bottom: 10px;
    text-align: justify;
}

.char-detail h3 img {
    vertical-align: middle;
}

.char-detail p {
    margin-bottom: 10px;
    text-align: justify;
}

.char-detail img.portrait {
    margin-top: 0;
}

// Layout Logik (Floats)
.char-detail .char-info {
    float: left;
    width: 600px;
}

.char-detail .char-img {
    float: left;
    width: 175px;
    margin-right: 20px;
    text-align: center;
}

// Villain Section Overrides
.char-detail .villain-image-container {
    margin-bottom: 10px;
    text-align: center;
}

.char-detail.villain-section .char-info {
    float: none;
    width: 800px; // Breiterer Text
    margin: auto; // Zentriert
}

.char-detail .villain-group-image {
    width: 800px;
    max-width: 100%;
    height: auto;
}

/* --- Theme Overrides (Flattened & Grouped) --- */
body.theme-night .char-detail {
    border-bottom-color: var(--button-bg);
}

body.theme-night .char-detail h3 img {
    filter: brightness(1.1);
}

body.theme-night .bookmarks-page .page-header strong {
    color: #ddd;
}

body.theme-night .bookmarks-page .comic-count-badge {
    background-color: var(--button-bg);
}

body.theme-night .bookmarks-page .bookmark-example {
    color: #ccc;
}

body.theme-night .no-bookmarks {
    color: #ccc;
    border-color: var(--button-bg);
}

body.theme-night .bookmarks-controls hr {
    background-color: var(--button-bg);
}

body.theme-night .bookmarks-controls button {
    background-color: var(--button-bg);
}

body.theme-night .bookmarks-controls button:hover {
    background-color: var(--border-light);
}

/* Aus _comic.scss übernommen */
// Comic Characters Component
.comic-characters {
    padding: 15px;
    margin: 20px 0;
    background-color: var(--content-box-bg);
    border: 1px solid var(--border-medium);
    border-radius: 8px;
    box-shadow: inset 0 1px 1px 0 rgb(0 0 0 / 0.35);
}

body.theme-night .comic-characters {
    background-color: var(--sidebar-bg);
    border-color: var(--page-bg);
}

.comic-characters h3 {
    margin-bottom: 20px;
    font-size: 1.2em;
    color: var(--text-color-light);
    text-align: center;
}

body.theme-night .comic-characters h3 {
    color: #bbb;
}

.character-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.character-group {
    width: 100%;
}

.character-group h4 {
    padding-bottom: 5px;
    margin-bottom: 15px;
    font-size: 1.1em;
    font-weight: bold;
    color: var(--text-color);
    text-align: center;
    border-bottom: 1px solid rgb(0 0 0 / 0.1);
}

body.theme-night .character-group h4 {
    color: #ddd;
    border-bottom: 1px solid var(--border-light);
}

.character-group-list {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
    padding: 20px;
}

// Character Item Styling (Flat)
.character-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 120px;
    text-align: center;
}

.character-item .character-name {
    display: block;
    margin-top: 5px;
    font-size: 0.9em;
    font-weight: bold;
    line-height: 1.3;
    overflow-wrap: break-word;
}

.character-item a {
    display: block;
    max-width: 100%;
    color: inherit;
    text-decoration: none;
    transition: transform 0.2s ease-in-out;
}

.character-item a:hover {
    transform: translateY(-5px);
}

.character-item a:hover .character-name {
    text-decoration: underline;
}

.character-item img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    background-color: var(--characters-area-bg);
    border: 2px solid var(--border-medium);
    border-radius: 50%;
    box-shadow: 0 2px 4px rgb(0 0 0 / 0.1);
}

body.theme-night .character-item img {
    background-color: var(--characters-area-bg);
    border-color: var(--border-light);
}
