// SPDX-License-Identifier: CC BY-NC-SA 4.0

///
/// Comic View und Charaktere.
///
/// Styling für die Einzelansicht eines Comics (Bild, Transkript, Tags) und Charakter-Listen.
/// Styles für die Comic-Ansicht und Transcript.
///

/*!
 * @file       resources/scss/pages/_comic.scss
 */
/// @link      twokinds.4lima.de
///
/// @copyright (c) 2025 Felix Maywald. CC BY-NC-SA 4.0
/// @license   https://github.com/RaptorXilef/twokinds.4lima.de/blob/main/LICENSE
///
/// @author    Felix Maywald (@RaptorXilef)
/// @link      https://github.com/RaptorXilef/twokinds.4lima.de
///

///
/// @since    5.0.0
/// - Refactoring.
/// - style(Linter): Hover-Effekt Spezifität gefixt.
/// - style(Refactor): Nesting reduziert (Phase 2 Flattening).
///

// Verwendete SCSS-Variablen:
// (Keine spezifischen SCSS-Vars in diesem Block)

// Verwendete CSS-Variablen (Custom Properties):
// - --content-box-bg: Hintergrund für Transkript-Box
// - --border-medium: Mittlere Rahmenfarbe
// - --text-color: Standard Textfarbe
// - --sidebar-bg: Hintergrund im Dark Mode
// - --page-bg: Rahmenfarbe im Dark Mode
// - --text-on-medium: Textfarbe auf Buttons (Transkript Header)
// - --button-bg: Hintergrund Header
// - --button-hover-bg: Hintergrund Header Hover
// - --text-color-medium: Mittlere Textfarbe
// - --characters-area-bg: Hintergrund Charakter-Bilder
// - --link-color: Akzentfarbe für Hover

@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

.comic {
    margin: auto;
    text-align: center;
}

.comic h1 {
    margin-bottom: 5px;
    font-size: 18px;
    font-weight: normal;
}

.comic header {
    margin-bottom: 15px;
}

// Comic Image Styling
#comic-image,
.comic-image {
    display: block; // Verhindert Abstände unten bei Inline-Images
    width: 100%;
    max-width: 100%; // Sicherheitsnetz für kleinere Container
    height: auto;
    margin: 0 auto; // Zentrierung sicherstellen
    border-radius: 7px;
    box-shadow: 0 2px 5px rgb(0 0 0 / 0.2);
}

// Transcript Box (Wiederhergestellt: Scroll-Box statt Akkordeon)
.comic .transcript {
    margin-top: 15px;
    font-size: 0.8em;
    text-align: left;
}

.comic .transcript-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 5px;
}

.comic .transcript-content {
    max-height: 550px;
    padding: 15px;
    margin-top: 5px;
    overflow: auto;
    background-color: var(--content-box-bg);
    border: 1px solid var(--border-medium);
    border-radius: 8px;
    box-shadow: inset 0 1px 1px 0 rgb(0 0 0 / 0.35);
}

body.theme-night .comic .transcript-content {
    color: var(--text-color);
    background-color: var(--sidebar-bg); // Accent Dark
    border-color: var(--page-bg);
}

.comic .transcript-content p {
    margin-bottom: 7px;
}

.comic .transcript-content p:last-of-type {
    margin-bottom: 0;
}

@include media-retina-mobile {
    .comic .transcript-content {
        font-size: 1.3em;
    }
}

// Below Navigation (Bookmarks)
.comic .below-nav {
    display: flex;
    flex-flow: row nowrap;
    gap: 1rem;
    align-items: center;
    justify-content: space-between;
    margin-top: 3px;
    margin-bottom: 0;
    font-size: 0.9em;
    font-style: italic;
    text-align: left;
}

body.theme-night .comic .below-nav {
    color: #ccc;
}

@include media-retina-mobile {
    .comic .below-nav {
        margin-top: 0.5rem;
        font-size: 1.2em;
    }

    .comic .below-nav .nav-instruction-content {
        display: none;
    }
}

.comic .below-nav .nav-instruction {
    flex: 1 1 auto;
}

.comic .below-nav .bookmark-control {
    display: flex;
    flex: 0 0 auto;
    flex-flow: row nowrap;
    align-items: center;
    justify-content: flex-end;
}

.comic .below-nav .bookmark-control .arrow-left {
    font-size: 1.4em;
}

.comic .below-nav .bookmark-control .button {
    font-size: 1em;
}

@include media-retina-mobile {
    .comic .below-nav .bookmark-control .button {
        font-size: 1.1em;
    }
}

// Tag Wrapper - Wiederhergestellt
.comic .tag-wrapper {
    display: flex;
    flex-flow: row nowrap;
    gap: 1rem;
    align-items: flex-start;
    justify-content: space-between;
    margin-top: 10px;
}

.comic .tag-wrapper .comic-tags {
    display: flex;
    flex: 1 1 auto;
    flex-flow: row wrap;
    gap: 0.3rem;
    row-gap: 0.5rem;
    align-items: center;
    font-size: 0.9em;
    text-align: left;
}

@include media-retina-mobile {
    .comic .tag-wrapper .comic-tags {
        font-size: 1.2em;
    }
}

.comic .tag-wrapper .comic-tags .button {
    font-size: 1em;
}

.comic .tag-wrapper .permalink {
    flex: 0 0 auto;
    padding-top: 3px;
    font-size: 0.9em;
}

body.theme-night .comic .tag-wrapper .permalink {
    color: #ccc;
}

@include media-retina-mobile {
    .comic .tag-wrapper .permalink {
        font-size: 1.2em;
    }
}

.comic .comic-footer {
    margin-top: 7px;
}

.comic .comic-header {
    position: relative;
    margin-bottom: 15px;
}

// Comic Characters Component
.comic-characters {
    padding: 15px;
    margin: 20px 0;
    background-color: var(--content-box-bg);
    border: 1px solid var(--border-medium);
    border-radius: 8px;
    box-shadow: inset 0 1px 1px 0 rgb(0 0 0 / 0.35);
}

body.theme-night .comic-characters {
    background-color: var(--sidebar-bg);
    border-color: var(--page-bg);
}

.comic-characters h3 {
    margin-bottom: 20px;
    font-size: 1.2em;
    color: var(--text-color-light);
    text-align: center;
}

body.theme-night .comic-characters h3 {
    color: #bbb;
}

.character-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.character-group {
    width: 100%;
}

.character-group h4 {
    padding-bottom: 5px;
    margin-bottom: 15px;
    font-size: 1.1em;
    font-weight: bold;
    color: var(--text-color);
    text-align: center;
    border-bottom: 1px solid rgb(0 0 0 / 0.1);
}

body.theme-night .character-group h4 {
    color: #ddd;
    border-bottom: 1px solid var(--border-light);
}

.character-group-list {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
    padding: 20px;
}

// Character Item Styling (Flat)
.character-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 120px;
    text-align: center;
}

.character-item .character-name {
    display: block;
    margin-top: 5px;
    font-size: 0.9em;
    font-weight: bold;
    line-height: 1.3;
    overflow-wrap: break-word;
}

.character-item a {
    display: block;
    max-width: 100%;
    color: inherit;
    text-decoration: none;
    transition: transform 0.2s ease-in-out;
}

.character-item a:hover {
    transform: translateY(-5px);
}

.character-item a:hover .character-name {
    text-decoration: underline;
}

.character-item img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    background-color: var(--characters-area-bg);
    border: 2px solid var(--border-medium);
    border-radius: 50%;
    box-shadow: 0 2px 4px rgb(0 0 0 / 0.1);
}

body.theme-night .character-item img {
    background-color: var(--characters-area-bg);
    border-color: var(--border-light);
}
